<?xml version="1.0" encoding="UTF-8"?>
<project version="4">
  <component name="CopilotDiffPersistence">
    <option name="pendingDiffs">
      <map>
        <entry key="$PROJECT_DIR$/internal/config/config.go">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/internal/config/config.go" />
              <option name="originalContent" value="package config&#10;&#10;// Config 这里只做最小化：先满足 logger/db 等基础模块需求。&#10;// 后续你可以换成读取 yaml/viper 等更完整的配置体系。&#10;//&#10;// LogPath: 日志文件路径（默认 ./logs/minichat.log）&#10;// LogLevel: debug/info/warn/error（默认 debug）&#10;type Config struct {&#10;&#9;LogPath  string&#10;&#9;LogLevel string&#10;}&#10;&#10;func GetConfig() Config {&#10;&#9;return Config{LogPath: &quot;./logs/minichat.log&quot;, LogLevel: &quot;debug&quot;}&#10;}&#10;" />
              <option name="updatedContent" value="package config&#10;&#10;// Config 这里只做最小化：先满足 logger/db 等基础模块需求。&#10;// 后续你可以换成读取 yaml/viper 等更完整的配置体系。&#10;//&#10;// LogPath: 日志文件路径（默认 ./logs/minichat.log）&#10;// LogLevel: debug/info/warn/error（默认 debug）&#10;type Config struct {&#10;&#9;LogPath  string&#10;&#9;LogLevel string&#10;}&#10;&#10;func GetConfig() Config {&#10;&#9;return Config{LogPath: &quot;./logs/minichat.log&quot;, LogLevel: &quot;debug&quot;}&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/internal/model/ddl_mysql.sql">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/internal/model/ddl_mysql.sql" />
              <option name="originalContent" value="-- MySQL DDL for minichat&#10;-- Charset/engine can be adjusted for your environment.&#10;&#10;CREATE TABLE IF NOT EXISTS `users` (&#10;  `id` BIGINT NOT NULL,&#10;  `username` VARCHAR(64) NOT NULL,&#10;  `password` VARCHAR(255) NOT NULL,&#10;  `nickname` VARCHAR(64) DEFAULT NULL,&#10;  `avatar` VARCHAR(255) DEFAULT NULL,&#10;  `status` TINYINT NOT NULL DEFAULT 0 COMMENT '用户状态(0离线/1在线/2注销)',&#10;  `created_at` DATETIME NOT NULL COMMENT '注册时间',&#10;  PRIMARY KEY (`id`),&#10;  UNIQUE KEY `uk_users_username` (`username`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `friends` (&#10;  `id` BIGINT NOT NULL,&#10;  `user_id` BIGINT NOT NULL COMMENT '本人ID',&#10;  `friend_id` BIGINT NOT NULL COMMENT '好友ID',&#10;  `remark` VARCHAR(64) DEFAULT NULL COMMENT '备注',&#10;  `status` TINYINT NOT NULL DEFAULT 0 COMMENT '0申请中/1已通过/2黑名单',&#10;  `created_at` DATETIME NOT NULL,&#10;  `updated_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`id`),&#10;  UNIQUE KEY `uk_user_friend` (`user_id`,`friend_id`),&#10;  KEY `idx_friends_user_id` (`user_id`),&#10;  KEY `idx_friends_friend_id` (`friend_id`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `messages` (&#10;  `id` BIGINT NOT NULL COMMENT '消息ID(建议使用分布式ID)',&#10;  `sender_id` BIGINT NOT NULL,&#10;  `receiver_id` BIGINT NOT NULL,&#10;  `msg_type` TINYINT NOT NULL COMMENT '1文字/2图片/3语音/4视频',&#10;  `content` TEXT,&#10;  `is_read` BOOLEAN NOT NULL DEFAULT FALSE,&#10;  `created_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`id`),&#10;  KEY `idx_sender_receiver` (`sender_id`,`receiver_id`),&#10;  KEY `idx_messages_created_at` (`created_at`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `groups` (&#10;  `id` BIGINT NOT NULL,&#10;  `name` VARCHAR(64) NOT NULL,&#10;  `owner_id` BIGINT NOT NULL,&#10;  `announcement` TEXT,&#10;  `avatar` VARCHAR(255) DEFAULT NULL,&#10;  `created_at` DATETIME NOT NULL,&#10;  `updated_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`id`),&#10;  KEY `idx_groups_owner_id` (`owner_id`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `group_members` (&#10;  `group_id` BIGINT NOT NULL,&#10;  `user_id` BIGINT NOT NULL,&#10;  `nickname` VARCHAR(64) DEFAULT NULL,&#10;  `role` TINYINT NOT NULL DEFAULT 0 COMMENT '0普通/1管理员/2群主',&#10;  `created_at` DATETIME NOT NULL,&#10;  `updated_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`group_id`,`user_id`),&#10;  KEY `idx_gm_group_id` (`group_id`),&#10;  KEY `idx_gm_user_id` (`user_id`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `sessions` (&#10;  `id` BIGINT NOT NULL,&#10;  `user_id` BIGINT NOT NULL,&#10;  `target_id` BIGINT NOT NULL,&#10;  `type` TINYINT NOT NULL COMMENT '1私聊/2群聊',&#10;  `last_msg` VARCHAR(255) DEFAULT NULL,&#10;  `unread_count` INT NOT NULL DEFAULT 0,&#10;  `updated_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`id`),&#10;  UNIQUE KEY `uk_user_target_type` (`user_id`,`target_id`,`type`),&#10;  KEY `idx_sessions_user_id` (`user_id`),&#10;  KEY `idx_sessions_updated_at` (`updated_at`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;" />
              <option name="updatedContent" value="-- MySQL DDL for minichat&#10;-- Charset/engine can be adjusted for your environment.&#10;&#10;CREATE TABLE IF NOT EXISTS `users` (&#10;  `id` BIGINT NOT NULL,&#10;  `username` VARCHAR(64) NOT NULL,&#10;  `password` VARCHAR(255) NOT NULL,&#10;  `nickname` VARCHAR(64) DEFAULT NULL,&#10;  `avatar` VARCHAR(255) DEFAULT NULL,&#10;  `status` TINYINT NOT NULL DEFAULT 0 COMMENT '用户状态(0离线/1在线/2注销)',&#10;  `created_at` DATETIME NOT NULL COMMENT '注册时间',&#10;  PRIMARY KEY (`id`),&#10;  UNIQUE KEY `uk_users_username` (`username`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `friends` (&#10;  `id` BIGINT NOT NULL,&#10;  `user_id` BIGINT NOT NULL COMMENT '本人ID',&#10;  `friend_id` BIGINT NOT NULL COMMENT '好友ID',&#10;  `remark` VARCHAR(64) DEFAULT NULL COMMENT '备注',&#10;  `status` TINYINT NOT NULL DEFAULT 0 COMMENT '0申请中/1已通过/2黑名单',&#10;  `created_at` DATETIME NOT NULL,&#10;  `updated_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`id`),&#10;  UNIQUE KEY `uk_user_friend` (`user_id`,`friend_id`),&#10;  KEY `idx_friends_user_id` (`user_id`),&#10;  KEY `idx_friends_friend_id` (`friend_id`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `messages` (&#10;  `id` BIGINT NOT NULL COMMENT '消息ID(建议使用分布式ID)',&#10;  `sender_id` BIGINT NOT NULL,&#10;  `receiver_id` BIGINT NOT NULL,&#10;  `msg_type` TINYINT NOT NULL COMMENT '1文字/2图片/3语音/4视频',&#10;  `content` TEXT,&#10;  `is_read` BOOLEAN NOT NULL DEFAULT FALSE,&#10;  `created_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`id`),&#10;  KEY `idx_sender_receiver` (`sender_id`,`receiver_id`),&#10;  KEY `idx_messages_created_at` (`created_at`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `groups` (&#10;  `id` BIGINT NOT NULL,&#10;  `name` VARCHAR(64) NOT NULL,&#10;  `owner_id` BIGINT NOT NULL,&#10;  `announcement` TEXT,&#10;  `avatar` VARCHAR(255) DEFAULT NULL,&#10;  `created_at` DATETIME NOT NULL,&#10;  `updated_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`id`),&#10;  KEY `idx_groups_owner_id` (`owner_id`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `group_members` (&#10;  `group_id` BIGINT NOT NULL,&#10;  `user_id` BIGINT NOT NULL,&#10;  `nickname` VARCHAR(64) DEFAULT NULL,&#10;  `role` TINYINT NOT NULL DEFAULT 0 COMMENT '0普通/1管理员/2群主',&#10;  `created_at` DATETIME NOT NULL,&#10;  `updated_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`group_id`,`user_id`),&#10;  KEY `idx_gm_group_id` (`group_id`),&#10;  KEY `idx_gm_user_id` (`user_id`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;&#10;CREATE TABLE IF NOT EXISTS `sessions` (&#10;  `id` BIGINT NOT NULL,&#10;  `user_id` BIGINT NOT NULL,&#10;  `target_id` BIGINT NOT NULL,&#10;  `type` TINYINT NOT NULL COMMENT '1私聊/2群聊',&#10;  `last_msg` VARCHAR(255) DEFAULT NULL,&#10;  `unread_count` INT NOT NULL DEFAULT 0,&#10;  `updated_at` DATETIME NOT NULL,&#10;  PRIMARY KEY (`id`),&#10;  UNIQUE KEY `uk_user_target_type` (`user_id`,`target_id`,`type`),&#10;  KEY `idx_sessions_user_id` (`user_id`),&#10;  KEY `idx_sessions_updated_at` (`updated_at`)&#10;) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4;&#10;" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/internal/model/friend_apply.go">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/internal/model/friend_apply.go" />
              <option name="originalContent" value="package model&#10;&#10;import &quot;time&quot;&#10;&#10;// Friend 表示好友关系（推荐插入两条：A-&gt;B 与 B-&gt;A）&#10;// Status: 0申请中, 1已通过, 2黑名单&#10;type Friend struct {&#10;&#9;ID       int64  `gorm:&quot;primaryKey;type:BIGINT&quot; json:&quot;id&quot;`&#10;&#9;UserID   int64  `gorm:&quot;type:BIGINT;not null;index;uniqueIndex:uk_user_friend&quot; json:&quot;user_id&quot;`&#10;&#9;FriendID int64  `gorm:&quot;type:BIGINT;not null;index;uniqueIndex:uk_user_friend&quot; json:&quot;friend_id&quot;`&#10;&#9;Remark   string `gorm:&quot;type:VARCHAR(64)&quot; json:&quot;remark&quot;`&#10;&#9;Status   int8   `gorm:&quot;type:TINYINT;not null;default:0;comment:0申请中/1已通过/2黑名单&quot; json:&quot;status&quot;`&#10;&#10;&#9;CreatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoCreateTime&quot; json:&quot;created_at&quot;`&#10;&#9;UpdatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoUpdateTime&quot; json:&quot;updated_at&quot;`&#10;}&#10;&#10;func (Friend) TableName() string { return &quot;friends&quot; }" />
              <option name="updatedContent" value="package model&#10;&#10;import &quot;time&quot;&#10;&#10;// Friend 表示好友关系（推荐插入两条：A-&gt;B 与 B-&gt;A）&#10;// Status: 0申请中, 1已通过, 2黑名单&#10;type Friend struct {&#10;&#9;ID       int64  `gorm:&quot;primaryKey;type:BIGINT&quot; json:&quot;id&quot;`&#10;&#9;UserID   int64  `gorm:&quot;type:BIGINT;not null;index;uniqueIndex:uk_user_friend&quot; json:&quot;user_id&quot;`&#10;&#9;FriendID int64  `gorm:&quot;type:BIGINT;not null;index;uniqueIndex:uk_user_friend&quot; json:&quot;friend_id&quot;`&#10;&#9;Remark   string `gorm:&quot;type:VARCHAR(64)&quot; json:&quot;remark&quot;`&#10;&#9;Status   int8   `gorm:&quot;type:TINYINT;not null;default:0;comment:0申请中/1已通过/2黑名单&quot; json:&quot;status&quot;`&#10;&#10;&#9;CreatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoCreateTime&quot; json:&quot;created_at&quot;`&#10;&#9;UpdatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoUpdateTime&quot; json:&quot;updated_at&quot;`&#10;}&#10;&#10;func (Friend) TableName() string { return &quot;friends&quot; }" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/internal/model/group_info.go">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/internal/model/group_info.go" />
              <option name="originalContent" value="package model&#10;&#10;import &quot;time&quot;&#10;&#10;type Group struct {&#10;&#9;ID           int64  `gorm:&quot;primaryKey;type:BIGINT&quot; json:&quot;id&quot;`&#10;&#9;Name         string `gorm:&quot;type:VARCHAR(64);not null&quot; json:&quot;name&quot;`&#10;&#9;OwnerID      int64  `gorm:&quot;type:BIGINT;not null;index&quot; json:&quot;owner_id&quot;`&#10;&#9;Announcement string `gorm:&quot;type:TEXT&quot; json:&quot;announcement&quot;`&#10;&#9;Avatar       string `gorm:&quot;type:VARCHAR(255)&quot; json:&quot;avatar&quot;`&#10;&#10;&#9;CreatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoCreateTime&quot; json:&quot;created_at&quot;`&#10;&#9;UpdatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoUpdateTime&quot; json:&quot;updated_at&quot;`&#10;}&#10;&#10;func (Group) TableName() string { return &quot;groups&quot; }&#10;&#10;// GroupMember 群成员&#10;// Role: 0普通成员, 1管理员, 2群主&#10;type GroupMember struct {&#10;&#9;GroupID  int64  `gorm:&quot;type:BIGINT;not null;primaryKey&quot; json:&quot;group_id&quot;`&#10;&#9;UserID   int64  `gorm:&quot;type:BIGINT;not null;primaryKey&quot; json:&quot;user_id&quot;`&#10;&#9;Nickname string `gorm:&quot;type:VARCHAR(64)&quot; json:&quot;nickname&quot;`&#10;&#9;Role     int8   `gorm:&quot;type:TINYINT;not null;default:0&quot; json:&quot;role&quot;`&#10;&#10;&#9;CreatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoCreateTime&quot; json:&quot;created_at&quot;`&#10;&#9;UpdatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoUpdateTime&quot; json:&quot;updated_at&quot;`&#10;}&#10;&#10;func (GroupMember) TableName() string { return &quot;group_members&quot; }" />
              <option name="updatedContent" value="package model&#10;&#10;import &quot;time&quot;&#10;&#10;type Group struct {&#10;&#9;ID           int64  `gorm:&quot;primaryKey;type:BIGINT&quot; json:&quot;id&quot;`&#10;&#9;Name         string `gorm:&quot;type:VARCHAR(64);not null&quot; json:&quot;name&quot;`&#10;&#9;OwnerID      int64  `gorm:&quot;type:BIGINT;not null;index&quot; json:&quot;owner_id&quot;`&#10;&#9;Announcement string `gorm:&quot;type:TEXT&quot; json:&quot;announcement&quot;`&#10;&#9;Avatar       string `gorm:&quot;type:VARCHAR(255)&quot; json:&quot;avatar&quot;`&#10;&#10;&#9;CreatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoCreateTime&quot; json:&quot;created_at&quot;`&#10;&#9;UpdatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoUpdateTime&quot; json:&quot;updated_at&quot;`&#10;}&#10;&#10;func (Group) TableName() string { return &quot;groups&quot; }&#10;&#10;// GroupMember 群成员&#10;// Role: 0普通成员, 1管理员, 2群主&#10;type GroupMember struct {&#10;&#9;GroupID  int64  `gorm:&quot;type:BIGINT;not null;primaryKey&quot; json:&quot;group_id&quot;`&#10;&#9;UserID   int64  `gorm:&quot;type:BIGINT;not null;primaryKey&quot; json:&quot;user_id&quot;`&#10;&#9;Nickname string `gorm:&quot;type:VARCHAR(64)&quot; json:&quot;nickname&quot;`&#10;&#9;Role     int8   `gorm:&quot;type:TINYINT;not null;default:0&quot; json:&quot;role&quot;`&#10;&#10;&#9;CreatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoCreateTime&quot; json:&quot;created_at&quot;`&#10;&#9;UpdatedAt time.Time `gorm:&quot;type:DATETIME;not null;autoUpdateTime&quot; json:&quot;updated_at&quot;`&#10;}&#10;&#10;func (GroupMember) TableName() string { return &quot;group_members&quot; }" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/internal/model/message.go">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/internal/model/message.go" />
              <option name="originalContent" value="package model&#10;&#10;import &quot;time&quot;&#10;&#10;// Message 私聊消息&#10;// MsgType: 1文字, 2图片, 3语音, 4视频&#10;type Message struct {&#10;&#9;ID         int64     `gorm:&quot;primaryKey;type:BIGINT&quot; json:&quot;id&quot;`&#10;&#9;SenderID   int64     `gorm:&quot;type:BIGINT;not null;index:idx_sender_receiver,priority:1&quot; json:&quot;sender_id&quot;`&#10;&#9;ReceiverID int64     `gorm:&quot;type:BIGINT;not null;index:idx_sender_receiver,priority:2&quot; json:&quot;receiver_id&quot;`&#10;&#9;MsgType    int8      `gorm:&quot;type:TINYINT;not null&quot; json:&quot;msg_type&quot;`&#10;&#9;Content    string    `gorm:&quot;type:TEXT&quot; json:&quot;content&quot;`&#10;&#9;IsRead     bool      `gorm:&quot;type:BOOLEAN;not null;default:false&quot; json:&quot;is_read&quot;`&#10;&#9;CreatedAt  time.Time `gorm:&quot;type:DATETIME;not null;autoCreateTime;index&quot; json:&quot;created_at&quot;`&#10;}&#10;&#10;func (Message) TableName() string { return &quot;messages&quot; }" />
              <option name="updatedContent" value="package model&#10;&#10;import &quot;time&quot;&#10;&#10;// Message 私聊消息&#10;// MsgType: 1文字, 2图片, 3语音, 4视频&#10;type Message struct {&#10;&#9;ID         int64     `gorm:&quot;primaryKey;type:BIGINT&quot; json:&quot;id&quot;`&#10;&#9;SenderID   int64     `gorm:&quot;type:BIGINT;not null;index:idx_sender_receiver,priority:1&quot; json:&quot;sender_id&quot;`&#10;&#9;ReceiverID int64     `gorm:&quot;type:BIGINT;not null;index:idx_sender_receiver,priority:2&quot; json:&quot;receiver_id&quot;`&#10;&#9;MsgType    int8      `gorm:&quot;type:TINYINT;not null&quot; json:&quot;msg_type&quot;`&#10;&#9;Content    string    `gorm:&quot;type:TEXT&quot; json:&quot;content&quot;`&#10;&#9;IsRead     bool      `gorm:&quot;type:BOOLEAN;not null;default:false&quot; json:&quot;is_read&quot;`&#10;&#9;CreatedAt  time.Time `gorm:&quot;type:DATETIME;not null;autoCreateTime;index&quot; json:&quot;created_at&quot;`&#10;}&#10;&#10;func (Message) TableName() string { return &quot;messages&quot; }" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/internal/model/session.go">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/internal/model/session.go" />
              <option name="originalContent" value="package model&#10;&#10;import &quot;time&quot;&#10;&#10;// Session 会话列表（Inbox）&#10;// Type: 1私聊, 2群聊&#10;type Session struct {&#10;&#9;ID          int64     `gorm:&quot;primaryKey;type:BIGINT&quot; json:&quot;id&quot;`&#10;&#9;UserID      int64     `gorm:&quot;type:BIGINT;not null;index;uniqueIndex:uk_user_target_type,priority:1&quot; json:&quot;user_id&quot;`&#10;&#9;TargetID    int64     `gorm:&quot;type:BIGINT;not null;index;uniqueIndex:uk_user_target_type,priority:2&quot; json:&quot;target_id&quot;`&#10;&#9;Type        int8      `gorm:&quot;type:TINYINT;not null;uniqueIndex:uk_user_target_type,priority:3&quot; json:&quot;type&quot;`&#10;&#9;LastMsg     string    `gorm:&quot;type:VARCHAR(255)&quot; json:&quot;last_msg&quot;`&#10;&#9;UnreadCount int32     `gorm:&quot;type:INT;not null;default:0&quot; json:&quot;unread_count&quot;`&#10;&#9;UpdatedAt   time.Time `gorm:&quot;type:DATETIME;not null;autoUpdateTime;index&quot; json:&quot;updated_at&quot;`&#10;}&#10;&#10;func (Session) TableName() string { return &quot;sessions&quot; }" />
              <option name="updatedContent" value="package model&#10;&#10;import &quot;time&quot;&#10;&#10;// Session 会话列表（Inbox）&#10;// Type: 1私聊, 2群聊&#10;type Session struct {&#10;&#9;ID          int64     `gorm:&quot;primaryKey;type:BIGINT&quot; json:&quot;id&quot;`&#10;&#9;UserID      int64     `gorm:&quot;type:BIGINT;not null;index;uniqueIndex:uk_user_target_type,priority:1&quot; json:&quot;user_id&quot;`&#10;&#9;TargetID    int64     `gorm:&quot;type:BIGINT;not null;index;uniqueIndex:uk_user_target_type,priority:2&quot; json:&quot;target_id&quot;`&#10;&#9;Type        int8      `gorm:&quot;type:TINYINT;not null;uniqueIndex:uk_user_target_type,priority:3&quot; json:&quot;type&quot;`&#10;&#9;LastMsg     string    `gorm:&quot;type:VARCHAR(255)&quot; json:&quot;last_msg&quot;`&#10;&#9;UnreadCount int32     `gorm:&quot;type:INT;not null;default:0&quot; json:&quot;unread_count&quot;`&#10;&#9;UpdatedAt   time.Time `gorm:&quot;type:DATETIME;not null;autoUpdateTime;index&quot; json:&quot;updated_at&quot;`&#10;}&#10;&#10;func (Session) TableName() string { return &quot;sessions&quot; }" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/internal/repo/user/interface.go">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/internal/repo/user/interface.go" />
              <option name="originalContent" value="package user&#10;&#10;import (&#10;&#9;&quot;context&quot;&#10;&#9;&quot;minichat/internal/model&quot;&#10;)&#10;&#10;type UserRepoInterface interface {&#10;&#9;// CreateUser 创建一个新的用户&#10;&#9;CreateUser(ctx context.Context, newUser *model.User) error&#10;&#9;// GetUserByUsername 通过用户名查询用户&#10;&#9;GetUserByUsername(ctx context.Context, username string) (*model.User, error)&#10;&#9;// GetUserByTelephone 通过手机号查询用户&#10;&#9;GetUserByTelephone(ctx context.Context, telephone string) (*model.User, error)&#10;}&#10;" />
              <option name="updatedContent" value="package user&#10;&#10;import (&#10;&#9;&quot;context&quot;&#10;&#9;&quot;minichat/internal/model&quot;&#10;)&#10;&#10;type UserRepoInterface interface {&#10;&#9;// CreateUser 创建一个新的用户&#10;&#9;CreateUser(ctx context.Context, newUser *model.User) error&#10;&#9;// GetUserByUsername 通过用户名查询用户&#10;&#9;GetUserByUsername(ctx context.Context, username string) (*model.User, error)&#10;&#9;// GetUserByTelephone 通过手机号查询用户&#10;&#9;GetUserByTelephone(ctx context.Context, telephone string) (*model.User, error)&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
        <entry key="$PROJECT_DIR$/internal/repo/user/user_repo.go">
          <value>
            <PendingDiffInfo>
              <option name="filePath" value="$PROJECT_DIR$/internal/repo/user/user_repo.go" />
              <option name="originalContent" value="package user&#10;&#10;import (&#10;&#9;&quot;context&quot;&#10;&#9;&quot;minichat/internal/model&quot;&#10;&#10;&#9;&quot;gorm.io/gorm&quot;&#10;)&#10;&#10;type UserRepo struct {&#10;&#9;db *gorm.DB&#10;}&#10;&#10;func NewUserRepo(db *gorm.DB) *UserRepo {&#10;&#9;return &amp;UserRepo{db: db}&#10;}&#10;&#10;func (r *UserRepo) CreateUser(ctx context.Context, user *model.User) error {&#10;&#9;return r.db.WithContext(ctx).Create(user).Error&#10;}&#10;&#10;func (r *UserRepo) GetUserByID(id int) (model.User, error) {&#10;&#9;var user model.User&#10;&#9;err := r.db.First(&amp;user, id).Error&#10;&#9;if err != nil {&#10;&#9;&#9;return user, err&#10;&#9;}&#10;&#9;return user, nil&#10;}&#10;&#10;func (r *UserRepo) GetUserByUsername(ctx context.Context, username string) (*model.User, error) {&#10;&#9;var user model.User&#10;&#9;if err := r.db.WithContext(ctx).Where(&quot;username = ?&quot;, username).First(&amp;user).Error; err != nil {&#10;&#9;&#9;return nil, err&#10;&#9;}&#10;&#9;return &amp;user, nil&#10;}&#10;&#10;func (r *UserRepo) GetUserByTelephone(ctx context.Context, telephone string) (*model.User, error) {&#10;&#9;var user model.User&#10;&#9;if err := r.db.WithContext(ctx).Where(&quot;telephone = ?&quot;, telephone).First(&amp;user).Error; err != nil {&#10;&#9;&#9;return nil, err&#10;&#9;}&#10;&#9;return &amp;user, nil&#10;}&#10;" />
              <option name="updatedContent" value="package user&#10;&#10;import (&#10;&#9;&quot;context&quot;&#10;&#9;&quot;minichat/internal/model&quot;&#10;&#10;&#9;&quot;gorm.io/gorm&quot;&#10;)&#10;&#10;type UserRepo struct {&#10;&#9;db *gorm.DB&#10;}&#10;&#10;func NewUserRepo(db *gorm.DB) *UserRepo {&#10;&#9;return &amp;UserRepo{db: db}&#10;}&#10;&#10;func (r *UserRepo) CreateUser(ctx context.Context, user *model.User) error {&#10;&#9;return r.db.WithContext(ctx).Create(user).Error&#10;}&#10;&#10;func (r *UserRepo) GetUserByID(id int) (model.User, error) {&#10;&#9;var user model.User&#10;&#9;err := r.db.First(&amp;user, id).Error&#10;&#9;if err != nil {&#10;&#9;&#9;return user, err&#10;&#9;}&#10;&#9;return user, nil&#10;}&#10;&#10;func (r *UserRepo) GetUserByUsername(ctx context.Context, username string) (*model.User, error) {&#10;&#9;var user model.User&#10;&#9;if err := r.db.WithContext(ctx).Where(&quot;username = ?&quot;, username).First(&amp;user).Error; err != nil {&#10;&#9;&#9;return nil, err&#10;&#9;}&#10;&#9;return &amp;user, nil&#10;}&#10;&#10;func (r *UserRepo) GetUserByTelephone(ctx context.Context, telephone string) (*model.User, error) {&#10;&#9;var user model.User&#10;&#9;if err := r.db.WithContext(ctx).Where(&quot;telephone = ?&quot;, telephone).First(&amp;user).Error; err != nil {&#10;&#9;&#9;return nil, err&#10;&#9;}&#10;&#9;return &amp;user, nil&#10;}" />
            </PendingDiffInfo>
          </value>
        </entry>
      </map>
    </option>
  </component>
</project>